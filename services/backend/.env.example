# ==========================================
# Ecommerce Backend Environment Configuration
# ==========================================
# Copy this file to .env and fill in your actual values
# NEVER commit .env to version control!

# ==========================================
# APPLICATION SETTINGS
# ==========================================
ENVIRONMENT=development
DEBUG=false
API_V1_STR=/api/v1
PROJECT_NAME=Ecommerce Backend
LOG_LEVEL=INFO

# ==========================================
# SECURITY SETTINGS
# ==========================================
# IMPORTANT: Generate a secure random secret key for production!
# You can generate one with: openssl rand -hex 32
SECRET_KEY=your-super-secret-key-change-this-in-production
JWT_ISSUER=ecommerce-backend
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7

# ==========================================
# CORS SETTINGS
# ==========================================
# Comma-separated list of allowed origins
# Examples:
#   - Development: http://localhost:3000,http://localhost:5173
#   - Production: https://yourdomain.com,https://www.yourdomain.com
BACKEND_CORS_ORIGINS=http://localhost:3000,http://localhost:5173

# ==========================================
# DATABASE CONFIGURATION
# ==========================================
POSTGRES_SERVER=localhost
POSTGRES_PORT=5432
POSTGRES_USER=your_database_user
POSTGRES_PASSWORD=your_database_password
POSTGRES_DB=recom_sys

# Optional: Full DATABASE_URL (overrides individual settings above)
# DATABASE_URL=postgresql://user:password@localhost:5432/recom_sys

# ==========================================
# AWS BEDROCK CONFIGURATION
# ==========================================
# Used for embeddings and LLM (Claude) operations
# Get credentials from AWS IAM console
AWS_ACCESS_KEY_ID=your_aws_access_key_id
AWS_SECRET_ACCESS_KEY=your_aws_secret_access_key
AWS_REGION=us-east-1

# Bedrock Model Configuration
BEDROCK_EMBEDDING_MODEL=amazon.titan-embed-text-v1
BEDROCK_LLM_MODEL=anthropic.claude-3-sonnet-20240229-v1:0
BEDROCK_EMBEDDING_DIMENSION=1536

# Embedding Service Settings
EMBEDDING_BATCH_SIZE=25
EMBEDDING_CACHE_TTL=86400

# LLM Service Settings
LLM_MAX_TOKENS=1000
LLM_TEMPERATURE=0.7
LLM_TOP_P=0.9

# ==========================================
# GOOGLE GEMINI CONFIGURATION
# ==========================================
# Used for image generation (product posters, banners)
# Get API key from: https://makersuite.google.com/app/apikey
GOOGLE_API_KEY=your_google_gemini_api_key

# Gemini Model Configuration
GEMINI_MODEL=gemini-1.5-pro
GEMINI_IMAGE_MODEL=imagen-3.0-generate-001

# Image Generation Settings
IMAGE_GENERATION_SIZE=1024x1024
IMAGE_STORAGE_PATH=static/generated_images
MAX_IMAGE_GENERATION_RETRIES=3

# ==========================================
# ML MODEL CONFIGURATION
# ==========================================
MODEL_STORAGE_PATH=ml_models
MODEL_VERSION_LIMIT=5

# Recommendation Settings
SIMILARITY_THRESHOLD=0.7
MIN_RECOMMENDATIONS=5
MAX_RECOMMENDATIONS=20
DEFAULT_RECOMMENDATION_COUNT=10

# ==========================================
# COLLABORATIVE FILTERING SETTINGS
# ==========================================
CF_FACTORS=50
CF_REGULARIZATION=0.01
CF_ITERATIONS=15
CF_MIN_INTERACTIONS=3

# ==========================================
# FBT (FREQUENTLY BOUGHT TOGETHER) SETTINGS
# ==========================================
# FP-Growth algorithm parameters
FBT_MIN_SUPPORT=0.01
FBT_MIN_CONFIDENCE=0.3
FBT_MIN_LIFT=1.0
FBT_MAX_ITEMSET_SIZE=3

# ==========================================
# USER SEGMENTATION SETTINGS
# ==========================================
RFM_SEGMENTS=5
BEHAVIORAL_CLUSTERS=8
CLUSTERING_MIN_SAMPLES=10

# ==========================================
# MODEL TRAINING SCHEDULE
# ==========================================
# Cron format: "minute hour day month dayofweek"
# Default: 2 AM daily
TRAINING_SCHEDULE_CRON=0 2 * * *
INCREMENTAL_TRAINING_DAYS=7
FULL_TRAINING_DAYS=90

# ==========================================
# FILE UPLOAD SETTINGS
# ==========================================
UPLOAD_FOLDER=static/uploads
MAX_FILE_SIZE=10485760
# Allowed extensions: png, jpg, jpeg, gif, webp

# ==========================================
# PAGINATION
# ==========================================
DEFAULT_PAGE_SIZE=20
MAX_PAGE_SIZE=100

# ==========================================
# INITIAL ADMIN USER (DEVELOPMENT ONLY)
# ==========================================
# These credentials are used to create the first admin user
# CHANGE THESE IN PRODUCTION!
FIRST_SUPERUSER_USERNAME=admin
FIRST_SUPERUSER_EMAIL=admin@example.com
FIRST_SUPERUSER_PASSWORD=admin123

# ==========================================
# OPTIONAL: REDIS CONFIGURATION (if using caching)
# ==========================================
# REDIS_HOST=localhost
# REDIS_PORT=6379
# REDIS_DB=0
# REDIS_PASSWORD=your_redis_password

# ==========================================
# OPTIONAL: SENTRY CONFIGURATION (if using error tracking)
# ==========================================
# SENTRY_DSN=your_sentry_dsn_here

# ==========================================
# SETUP INSTRUCTIONS
# ==========================================
# 1. Copy this file: cp .env.example .env
# 2. Fill in all required values (marked as "your_...")
# 3. Generate a secure SECRET_KEY: openssl rand -hex 32
# 4. Set up PostgreSQL database
# 5. Create AWS Bedrock credentials (for embeddings/LLM)
# 6. Create Google Gemini API key (for image generation)
# 7. Install dependencies: pip install -r requirements.txt
# 8. Run migrations: alembic upgrade head
# 9. Start server: uvicorn app.main:app --reload

# ==========================================
# SECURITY NOTES
# ==========================================
# - NEVER commit .env to version control
# - Use strong, unique passwords for all services
# - Rotate secrets regularly in production
# - Use IAM roles instead of access keys when possible (AWS)
# - Enable MFA on all cloud service accounts
# - Limit CORS origins to only your frontend domain(s)
# - Use HTTPS in production
# - Keep dependencies updated for security patches
